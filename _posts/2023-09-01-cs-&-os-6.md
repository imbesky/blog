---
title: "[컴퓨터구조&운영체제] 6. 메모리와 캐시 메모리"
excerpt: "메모리와 캐시 메모리"

categories:
  - Concept
tags:
  - [concept, CS&OS]

permalink: /concept/cs-&-os-6/

toc: true
toc_sticky: true

date: 2023-09-01
last_modified_at: 2023-12-05
---
# 6. 메모리와 캐시 메모리

## 1. RAM의 특징과 종류

`메모리`라는 용어로 주로 지칭되는 저장 장치

### 특징

휘발성 저장 장치 volatile memory임
- 전원이 끄면 저장된 내용이 사라짐
- 휘발성 저장 장치인 RAM에는 `실행할 대상`

- 보조기억장치는 주로 비휘발성 저장 장치이지만 CPU가 접근하지 못함
- 비휘발성 저장 장치에는 `보관할 대상`

- CPU가 실행하고 싶은 프로그램이 보조기억장치에 있다면 RAM으로 복사해 저장 후 실행

### 용량과 성능

- 용량이 작으면 보조기억장치에서 실행할 대상에 대한 정보를 가져오는 일이 잦아져 실행 지연
- 용량이 크면 많은 프로그램을 동시에 빠르게 실행하는 데 유리

- 일정 수준까지는 용량과 프로그램 실행 속도가 비례
- 일정 이상의 용량은 성능과 반드시 비례하지는 않음

### 종류

1. DRAM

- Dynamic RAM
- 시간이 지나면 저장된 데이터가 사라짐
- 데이터의 소멸을 막기 위해 일정 주기로 데이터 재활성화 필요
- 일반적으로 메모리로 사용
- 소비 전력 낮음, 저럼함, 집적도 높음 -> 대용량 설계에 용이

2. SRAM

- Static RAM
- 저장된 데이터가 소실되지 않음
- 일반적으로 DRAM보다 속도가 빠름
- 대용량으로 만들어질 필요는 없으나 속도가 빨라야 하는 저장 장치(ex 캐시 메모리)에 사용
- DRAM보다 소비 전력 큼, 비쌈, 집적도 낮음

3. SDRAM

- Synchronous Dynamic RAM
- 클럭 신호와 동기화됨 = 클럭에 맞춰 CPU와 정보 교환 가능

4. DR SDRAM

- 대역폭 = data rate = 데이터를 주고받는 길의 너비
- 대역폭을 넓혀 속도를 증진시킴

- SDR SDRAM = Single Data Rate SDRAM: 한 클럭당 하나씩 데이터를 주고받을 수 있는 SDRAM
- DDR SDRAM = Double Data Rate SDRAM: 대역폭이 SDR SDRAM의 2배
- 대역폭 너비가 SDR SDRAM의 2^n배가 되면 DDRn SDRAM(1일 경우 생략)

## 2. 메모리의 주소 공간

메모리에 저장된 정보의 위치는 주소로 나타낼 수 있음

### 물리 주소 & 논리 주소

- 메모리에 저장된 정보는 시시각각 변함
- `CPU와 현재 실행 중인 프로그램`과 `메모리`가 사용하는 주소는 상이

1. 물리 주소

- 정보가 실제로 저장된 하드웨어상의 주소
- 메모리가 사용하는 주소

2. 논리 주소

- 실행 중인 프로그램 각각에 부여된 주소
- 0번지부터 시작
- CPU와 실행 중인 프로그램이 사용하는 주소

3. 변환(논리 주소 -> 물리 주소)

- MMU = Memort Managment Unit라는 하드웨어에 의해 변환됨
- 물리 주소 = CPU가 발생시킨 논리 주소 + 베이스 레지스터 값
- 베이스 레지스터: 프로그램의 첫 물리 주소 저장
- 논리 주소: 프로그램의 시작점으로부터 떨어진 거리

### 메모리 보호 기법

한계 레지스터
- 논리 주소의 최대 크기를 저장
- 베이스 레지스터 값 <= 프로그램의 물리 주소 <= 베이스 레지스터 값 + 한계 레지스터 값

- 프로그램의 논리 주소 영역을 벗어난 명령어의 실행 방지
- 실행 중인 프로그램이 다른 프로그램에 영향을 받지 않도록 보호

- 한계 레지스터보다 높은 논리 주소에 접근하려고 하면 인터럽트 발생

## 3. 캐시 메모리

### 저장 장치 계층 구조

- CPU와 가까운 저장 장치는 빠르고 멀리 있는 저장 장치는 느림
- 속도가 빠른 저장 장치는 저장 용량이 작고 비쌈

저장 장치 계층 구조 memory hierarchy
- CPU와의 거리에 따른 저장 장치 계층

[memory hierarchy](/assets/images/cs-&-os/memory-hierarchy.png)

### 캐시 메모리

- SRAM 기반의 저장 장치
- CPU와 메모리 사이에 위치
- 레지스터보다 용량이 크고 메모리보다 빠름

- CPU가 메모리에 접근하는 시간은 CPU의 연산 속도보다 느려 실행 속도는 지연되는 한계를 극복하기 위함
- 메모리에서 CPU가 사용할 데이터를 캐시 메모리에 저장후 활용

- 코어(CPU)와 가까운 순서대로 계층 구성
- L1, L2, L3
- 용량은 거리가 멀수록 커짐
- 가격은 거리가 가까울수록 비쌈
- 거리 순서로 데이터 검색 우선순위 설정
- 보통 코어 내부에 L1, L2가 고유한 캐시 메모리로 할당되고 L3 캐시는 여러 코어가 공유
- 분리형 캐시 split cache: L1 캐시를 명령어를 저장하는 L1I 캐시와 데이터를 저장하는 L1D 캐시로 분리한 형태

### 참조 지역성 원리

캐시 메모리는 CPU가 사용할 법한 데이터를 예측하여 저장

- 캐시 히트: 예측한 데이터가 실제로 CPU에서 활용된 경우
- 캐시 미스: 예측이 틀려 메모리에서 데이터를 직접 가져와야 하는 경우
- 캐시 적중률 = 캐시 히트 횟수 / (캐시 해스 횟수 + 캐시 미스 횟수)
- 일반적인 캐시 적중률은 대략 85~95%

참조 지역성의 원리
- 메모리로부터 가져올 데이터를 결정하는 원칙

```
1. 시간 지역성: CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다.
2. 공간 지역성: CPU는 최근에 접근한 메모리 공간 근처를 접근하려는 경향이 있다.
```