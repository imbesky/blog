---
title: "[우테코 프리코스] 3주차 회고"
excerpt: "로또 시스템 만들다"

categories:
  - Backend
tags:
  - [java, wooteco]

permalink: /backend/wooteco-3/

toc: true
toc_sticky: true

date: 2023-11-09
last_modified_at: 2023-11-12
---
# 우테코 프리코스 3주차: 로또

3주차 미션을 끝냈다.
이전 주차의 미션들에 받은 피드백을 다시 한 번씩 확인하다가 깨달았는데, 매 주차 미션마다 코드의 양이 거의 2배가 되고 있었다.
1주차 미션은 280줄이었는데 3주차는 거의 1200줄에 달했다. 내가 이걸 한 줄 한 줄 썼다는 사실이 놀랍다.
다음 미션은 또 얼마나 많은 코드를 쓸지 기대된다! 

## 3주차 목표 

1. enum class의 활용법에 대해 더 고민할 것
Enum 클래스를 지난번에도 사용하기는 했지만 단순한 상수를 저장해 놓는 방식에 지나지 않았다. 이번 피드백에 해당 내용이 나오기도 했고 그래서 더 다양한 활용 방법을 고민해보게 되었다. 

그러다 이 글을 발견했다.
[Java Enum 활용기](https://techblog.woowahan.com/2527/)
배민은 내 배도 채워주고 지적 욕구도 채워주는 회사다. 

이 글에서 내게 가장 와닿았던 문구는 이것이다.
`상태와 행위를 한곳에서 관리`할 때 사용할 수 있다는 점. 

그때 마침 `일치하는 숫자의 개수`와 `상금`과 `당첨통계 메세지`를 어떻게 맵핑해야 좋을지 고민하고 있었다. List에 HashMap을 넣을까?와 같은 고민을 하고 있었는데 Enum을 활용해도 좋겠다는 생각을 하게 됐다.
그리고 에러 메세지 앞에 `"[ERROR]"`를 포함하라는 요구 사항이 있어서 에러 메세지를 하나의 enum 클래스에전부 넣은 다음 getMessage()로String 값을 불러올때마다 앞에 상수로 선언한 `"[ERROR]"`값을 붙였다(String.concat() 사용). 

물론 둘 다 실무에서는 안 쓰는 방법일지도 모른다. 그런데 어차피 그런 걸 한 두번 한 것도 아니라서 일단 써보고 피드백을 받기로 했다. 용감하게 가자고. 

2. 하드 코딩 ×
숫자든 문자든 소스 코드에서 직접적으로 드러나지 않도록 노력했다. '이런 것까지...?' 라는 생각이 들었지만 일단 했다. 

- 메서드 내에서 사용되는 값: 클래스 내부의 상수로 선언
- 여러 메서드에서 사용되는 값: 상수 클래스에 선언 후 import
- 여러 메서드에서 사용되고 추가적인 데이터나 처리가 필요한 값: enum 클래스에 선언 

3. 한 가지 기능만 하는 메서드, 클래스의 적절한 분리 

이번 피드백에서는 메서드의 줄 수가 15줄을 넘어가지 않도록 한 가지 기능만 하도록 만들라는 권고 사항이 있었다. 물론 15줄이라는 건 한 가지 일만 하는 메서드의 절대적인 기준이 될 수 없다는 건 알지만 지표로 삼기에는 충분했던 것 같다.
다른 메서드로 분리할 수 있으면 한 가지 기능이 아니라는 어딘가서에 봤던 문장을 생각하면서 메서드를 분리하려고 했다. 

클래스 역시 비슷하게 다른 기능(역할)을 하면 다른 클래스로 분리될 수 있도록 했는데, SRP를 바탕으로 한 클래스의 분리는 아직도 잘 모르겠다-!! 

4. 기능별로 테스트 -> 작은 단위, 큰 단위로 

우테코에서는 과제 요구사항으로 구현할 기능을 README.md 파일에 정리하고 시작하라는 내용을 제시한다.
그래서 우선 구현할 기능의 세부 내용을 입력/출력/내부 로직 세 가지로 분류해 정리했다. 그리고 각 내부 로직에서 있을법 한 오류를 생각한 다음 그 오류를 검증하는 코드를 만들고, 이를 확인할 수 있는 테스트를 작성했다.
작게는 입력 받는 값들의 validate여부를 확인했고, 크게는 최종 결과값을 전부 정확하게 출력하는지 확인하는 과정을 거쳤다. 

## 배운 것들
### String.format()
소수점 둘째 자리에서 반올림해 소수점 첫째 자리까지만 반환하라는 요구 사항이 있어서 사용했다.
아직 문법에 대해서는 더 학습하는 중이다. 상수를 집어넣을 수 있는 방법도 있는 모양인데, 4주차에 더 본격적으로 공부하고 정리해 볼 예정. 

### Collections.frequency() 

Collections에 대해서는 아직 공부가 더 필요하다. 

### 정규식: String.matches()
정규식을 만족하는 문자열인지 확인하는 String API 

정규식 작성은 이 글을 참고했다.
[정규식 문법](https://kauth.kakao.com/oauth/authorize?client_id=cc7f42726ce7f429b2fa415d390c62d7&redirect_uri=https%3A%2F%2Fwww.tistory.com%2Fauth%2Fkakao%2Fredirect&response_type=code&prompt=none&state=aHR0cHM6Ly9pbnBhLnRpc3RvcnkuY29tL2VudHJ5L0pBVkEtJUUyJTk4JTk1LSVFQyVBMCU5NSVFQSVCNyU5QyVFQyU4QiU5RFJlZ3VsYXItRXhwcmVzc2lvbi0lRUMlODIlQUMlRUMlOUElQTklRUIlQjIlOTUtJUVDJUEwJTk1JUVCJUE2JUFDfEFVVE9MT0dJTg==) 

1부터 45에 해당하는 숫자를 찾겠다고 사용했는데 지금 생각해보면 그냥 숫자인지 판별한 다음에 숫자로 자료형을 변환해서 1<=숫자<=45로 했어도 되는거 아닌가?
괜히 길을 좀 돌아간 느낌...
공부됐으니 됐다. 

### isEmpty(), isBlank()
String의 API들이다. 

1. String.isEmpty()
빈 문자열 `""` 인지 판별한다. 

2. String.isBlank()
빈 문자열 혹은 공백만 포함하는 문자열인지 판별한다. 

### stream
`stream`함수를 써서 한 줄에 계산을 끝내는 게 (효율성은 둘째로 치고) 멋져 보여서 나도 따라해 봤다.
람다식도 (역시 이쪽도 멋져 보이길래) 써봤는데 인텔리제이는 자꾸 수정하라고 경고를 해서... 

그때 그때 필요한 기능들을 찾아 쓰고 있는데, 아직 공부가 더 필요한 것 같다. 어떤 것이 효율적이고, 어떤 방식으로 돌아가는지 더 알고 싶다! 

### enum 클래스의 활용 

단순히 문자열 저장이나 숫자 저장에 쓰던 저번 주차에서 발전해 이름, 가격, 메세지를 한 번에 저장하는 등의 형태로 활용했다. 3주차 목표 항목에 썼던 것처럼 블로그 글에 영감을 받았다.
Map에 Enum 클래스를 집어넣어서 활용해보기도 했는데, 잘 하는 것인지는 모르겠지만 편리하게 느껴졌다. 

## 피드백 내용
이번에는 이전보다 더 다양한 피드백을 받을 수 있었다. 다들 너무 열심히 해줘서 고마웠다. 스스로 찾지 못했던 문제점을 타인이 찾아주는 게 너무 좋아서 프리코스 끝나고 계속 코드 리뷰를 받고 싶다... 

- 네이밍! 용도 명확히/자료형 이름 사용하지 않기
- 포맷팅 사용
- 한 줄에 하나의  `.`
- domain에 출력 내용을 두지 말것
- 클래스 간의 결합도 낮추기: 의존성 주입
- 부정 조건문보다는 긍정 조건문
- Serivce에는 비즈니스 로직을
- 객체 지향적 측면에서 생각
- mvc 패턴의 요소들이 맡은 책임과 기능을 더 면밀하게 파악해야 할 것 같음(누가 이렇게 말했다는 건 아니고 피드백을 보니 이런 생각이 들었다는 뜻)
- 예외 throw 중복되지 않게
- 최소 단위 테스트를 만들 것
- String.format 이용해서 자료형 변환 없이 출력하기
- service와 controller가 좀 많음 

## 4주차 목표
1. 객체 지향 원리를 준수하기(5원칙, 생활 체조 원칙 등)
2. 수정 및 유지보수를 염두에 두기
3. 단위 테스트 만들기
4. 확실한 예외처리